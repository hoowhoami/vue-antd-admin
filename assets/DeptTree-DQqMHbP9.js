import{A as C,d as N,_ as V}from"./index-BGRhdYbt.js";import{ai as b,bx as E,v as z,x as F,y as L,aB as U,S as $}from"./antdv-BbttoKUq.js";import{d as G,f as c,c as M,W as P,a5 as W,a6 as y,k as o,Y as u,G as g,F as Y,a7 as j,a8 as q}from"./vue-nPfkdNmw.js";const H=p=>(j("data-v-0129359e"),p=p(),q(),p),J={style:{"--border":1},class:"header"},O=H(()=>y("div",{class:"title"},"组织架构",-1)),Q=G({name:"DeptTree",__name:"DeptTree",emits:["select","init"],setup(p,{emit:D}){const m=D,d=c(""),i=c([]),l=c([]),v=c(!0),_=c(!0),f=M(()=>x(b(i.value),d.value)),x=(t,e="")=>t.filter(n=>{var a,s;return(a=n.children)!=null&&a.length&&(n.children=x(n.children,e),n.children.length)?!0:(s=n.name)==null?void 0:s.includes(e)}),S=async()=>{_.value=!0,i.value=await C.systemDept.deptList({}).finally(()=>_.value=!1),l.value=[...l.value,...i.value.map(t=>Number(t.id))],m("init",i.value)},T=t=>{m("select",t[0])},h=(t,e=[])=>t.reduce((n,a)=>{var s;return n.push(a.id),(s=a.children)!=null&&s.length&&h(a.children,n),n},e),k=()=>{l.value=h(f.value)},K=t=>{l.value=t,v.value=!1};return S(),(t,e)=>{const n=E,a=N,s=z,w=F,B=L,I=U,A=$;return P(),W(Y,null,[y("div",J,[O,o(n,{value:d.value,"onUpdate:value":e[0]||(e[0]=r=>d.value=r),size:"small",placeholder:"搜索"},null,8,["value"]),o(B,null,{overlay:u(()=>[o(w,null,{default:u(()=>[o(s,{onClick:k},{default:u(()=>[g(" 展开全部 ")]),_:1}),o(s,{onClick:e[1]||(e[1]=r=>l.value=[])},{default:u(()=>[g(" 折叠全部 ")]),_:1})]),_:1})]),default:u(()=>[o(a,{icon:"ant-design:more-outlined",size:"20",class:"flex-shrink-0"})]),_:1})]),o(A,{spinning:_.value},{default:u(()=>[o(I,{expandedKeys:l.value,"onUpdate:expandedKeys":e[2]||(e[2]=r=>l.value=r),class:"min-h-1xl","auto-expand-parent":v.value,"tree-data":f.value,"field-names":{key:"id",title:"name"},onSelect:T,onExpand:K},null,8,["expandedKeys","auto-expand-parent","tree-data"])]),_:1},8,["spinning"])],64)}}}),ee=V(Q,[["__scopeId","data-v-0129359e"]]);export{ee as default};
