import{d as C,$ as I,aj as S,f as m,W as k,a5 as z,k as e,Y as o,u as _,a6 as d,G as B,B as A,ac as M,a7 as U,a8 as N}from"./vue-nPfkdNmw.js";import{_ as V}from"./logo-DzsBprQM.js";import{e as F,A as R,d as f,s as T,_ as $}from"./index-BGRhdYbt.js";import{L as j,a9 as q,aa as E,e as i,M as G}from"./antdv-BbttoKUq.js";const L=u=>(U("data-v-9bd3ff02"),u=u(),N(),u),W={class:"login-box"},Y=L(()=>d("div",{class:"login-logo"},[d("img",{src:V,width:"45"}),d("h1",{class:"mb-0 ml-2 text-3xl font-bold"},"Antdv Admin")],-1)),D=["src"],H=C({__name:"index",setup(u){const g=I(),h=S(),w=F(),c=m(!1),v=m(""),a=m({username:"admin",password:"a123456",verifyCode:"",captchaId:""}),p=async()=>{const n=await R.captcha.captchaCaptchaByImg({width:100,height:50});v.value=n.img,a.value.captchaId=n.id};p();const x=async()=>{const{username:n,password:t,verifyCode:l}=a.value;if(n.trim()==""||t.trim()=="")return i.warning("用户名或密码不能为空！");if(!l)return i.warning("请输入验证码！");i.loading("登录中...",0),c.value=!0,a.value;const[s]=await T(w.login(a.value));s?(G.error({title:()=>"提示",content:()=>s.message}),p()):(i.success("登录成功！"),setTimeout(()=>h.replace(g.query.redirect||"/"))),c.value=!1,i.destroy()};return(n,t)=>{const l=j,s=q,y=M("a-button"),b=E;return k(),z("div",W,[Y,e(b,{layout:"horizontal",model:a.value,onSubmit:A(x,["prevent"])},{default:o(()=>[e(s,null,{default:o(()=>[e(l,{value:a.value.username,"onUpdate:value":t[0]||(t[0]=r=>a.value.username=r),size:"large",placeholder:"admin"},{prefix:o(()=>[e(_(f),{icon:"ant-design:user-outlined"})]),_:1},8,["value"])]),_:1}),e(s,null,{default:o(()=>[e(l,{value:a.value.password,"onUpdate:value":t[1]||(t[1]=r=>a.value.password=r),size:"large",type:"password",placeholder:"a123456",autocomplete:"new-password"},{prefix:o(()=>[e(_(f),{icon:"ant-design:lock-outlined"})]),_:1},8,["value"])]),_:1}),e(s,null,{default:o(()=>[e(l,{value:a.value.verifyCode,"onUpdate:value":t[2]||(t[2]=r=>a.value.verifyCode=r),placeholder:"验证码",maxlength:4,size:"large"},{prefix:o(()=>[e(_(f),{icon:"ant-design:safety-outlined"})]),suffix:o(()=>[d("img",{src:v.value,class:"absolute right-0 h-full cursor-pointer",onClick:p},null,8,D)]),_:1},8,["value"])]),_:1}),e(s,null,{default:o(()=>[e(y,{type:"primary","html-type":"submit",size:"large",loading:c.value,block:""},{default:o(()=>[B(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}}),Q=$(H,[["__scopeId","data-v-9bd3ff02"]]);export{Q as default};
