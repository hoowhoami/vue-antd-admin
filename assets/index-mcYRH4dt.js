import{_,s as f,b as h}from"./upload-modal.vue_vue_type_script_setup_true_lang-DeB_l7mn.js";import{u as v}from"./dynamic-table-3ORtHQM3.js";import{A as u}from"./index-BGRhdYbt.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-BEJgt-SP.js";import{b5 as b}from"./antdv-BbttoKUq.js";import{d as g,f as S,W as k,a5 as x,k as l,Y as c,G as w,u as i,ac as C}from"./vue-nPfkdNmw.js";import"./dateUtil-D7gJQxXe.js";import"./index.vue_vue_type_style_index_0_lang-PCrZZ9h2.js";import"./schema-form.vue_vue_type_script_setup_true_lang-ChTuMCM5.js";import"./is-DIFaXsjl.js";import"./index-5akZo7rI.js";const E=g({name:"ToolsStorage",__name:"index",setup(y){const e=S([]),[m,o]=v({formProps:{schemas:f},rowSelection:{type:"checkbox",selectedRowKeys:e,onSelect:(t,r)=>{r?e.value=[...e.value,t.id]:e.value=e.value.filter(a=>a!==t.id)},onSelectAll:(t,r,a)=>{const s=a.map(n=>n.id);t?e.value=[...e.value,...s]:e.value=e.value.filter(n=>!s.includes(n))}}}),d=()=>{o==null||o.reload()},p=async()=>{await u.toolsStorage.storageDelete({ids:e.value}),e.value=[],o==null||o.reload()};return(t,r)=>{const a=C("a-button"),s=b;return k(),x("div",null,[l(i(m),{"row-key":"id","header-title":"存储管理","data-request":i(u).toolsStorage.storageList,columns:i(h),bordered:"",size:"small"},{toolbar:c(()=>[l(_,{onUploadSuccess:d}),l(s,{title:"你确定要删除这些数据吗?","ok-text":"确定","cancel-text":"取消",onConfirm:p},{default:c(()=>[l(a,{disabled:!t.$auth("tool:storage:delete")||!e.value.length,type:"error"},{default:c(()=>[w(" 删除 ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["data-request","columns"])])}}});export{E as default};
