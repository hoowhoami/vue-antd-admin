import{U as w,$ as A,f as C,c as b,w as O}from"./vue-nPfkdNmw.js";import{f as _,z as l,b as M,L as y,P as D,c as F}from"./index-BGRhdYbt.js";const G=[M,y,D],k=w("tabs-view",()=>{const o=A(),T=_(),t=C([]),P=b(()=>t.value.filter(e=>e&&!c(e)&&l.hasRoute(e.name))),i=b(()=>t.value.find(e=>e&&!c(e)&&e.fullPath===o.fullPath)),c=e=>{var s;return((s=e.meta)==null?void 0:s.hideInTabs)||G.some(a=>a===e.name)},n=e=>{const s=F(),a=l.getRoutes(),u=e.reduce((r,f)=>{var v,h,m;if(f.name&&l.hasRoute(f.name)){const p=(m=(h=(v=a.find(N=>N.name===f.name))==null?void 0:v.components)==null?void 0:h.default)==null?void 0:m.name;p&&r.push(p)}return r},[]);s.remove(u)},x=e=>({...e,matched:e.matched.map(s=>{const{meta:a,path:u,name:r}=s;return{meta:a,path:u,name:r}})}),d=e=>c(e)?!1:(t.value.some(a=>a.fullPath==e.fullPath)||t.value.push(x(e)),!0),R=e=>{const s=t.value.findIndex(a=>a.fullPath==e.fullPath);n(t.value.splice(0,s))},g=e=>{const s=t.value.findIndex(a=>a.fullPath==e.fullPath);n(t.value.splice(s+1))},E=e=>{const s=t.value.findIndex(a=>a.fullPath===e.fullPath);if(s!==-1){const a=t.value.splice(s,1);n(t.value),t.value=a}},I=e=>{const s=t.value.findIndex(u=>u.fullPath==e.fullPath),a=Object.is(i.value,t.value[s]);if(n(t.value.splice(s,1)),a){const u=t.value[Math.max(0,t.value.length-1)];l.push(u)}},S=()=>{n(t.value),t.value=[]},L=e=>{const s=l.currentRoute.value,a=t.value.find(u=>u.fullPath===s.fullPath);a&&(a.meta.title=e)};return O(()=>o.fullPath,()=>{d(o)},{immediate:!0}),window.addEventListener("beforeunload",()=>{T.layoutSetting.cacheTabs||(c(o)?t.value=[t.value[0]]:t.value=[i.value||t.value[0]],t.value=t.value.filter(Boolean))}),{tabsList:t,getTabsList:P,getCurrentTab:i,addTabs:d,closeLeftTabs:R,closeRightTabs:g,closeOtherTabs:E,closeCurrentTab:I,closeAllTabs:S,updateTabTitle:L}},{persist:{paths:["tabsList"]}});export{k as u};
